let connectionService,queryService;_965‍.x([["default",()=>_965‍.o]]);_965‍.w("../Service/ConnectionService",[["default",["connectionService"],function(v){connectionService=v}]]);_965‍.w("../Service/QueryService",[["default",["queryService"],function(v){queryService=v}]]);


class UserCheck {
    async checkUser(req, res, next) {
        let connection;
        try {
            connection = await connectionService.pool.getConnectionAsync();
            const { email } = req.body;
            const dbQuery = queryService.queries.countUserByEmail;
            const dbResult = await connection.queryAsync(dbQuery, {
                email,
            });
            
            const countValue = dbResult[0].ExistEmail;

            if(countValue == 1) {
                res.status(400).send('This user email already exist!!! Please try again.');
            } else {
                next();
            }
            
        } catch (error) {
            return error;
        }
    }
}

_965‍.d(new UserCheck());
